plugins {
    id 'com.moowork.node' version '0.13' apply false
}

task clean(
        group: 'Build',
        dependsOn: ':client:npmClean',
        description: 'Clean the files and directories generated') {}
task build(
        group: 'Build',
        dependsOn: ':client:npmInstall',
        description: 'Assembles this project') {}

project(':client') {

    apply plugin: 'com.moowork.node'

    node {
        version = node_version
        npmVersion = npm_version
        download = true
        workDir = file("${project.projectDir}/node")
        nodeModulesDir = file("${project.projectDir}/")
    }

    task npmClean(
            type: Delete,
            group: 'Node',
            description: 'Clean the files and directories generated by npm during the build',) {
        delete "${project.projectDir}/node"
        delete "${project.projectDir}/node_modules"
        delete "${project.projectDir}/typings"
        delete fileTree("${project.projectDir}/app") {
            include '**/*.js', '**/*.js.map'
        }
    }
}

